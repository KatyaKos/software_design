# CLI

Интерпретатор командной строки с базовыми для языка bash командами.


## Описание языка

Поддерживаются такие команды bash как assignment, cat, echo, exit, pwd, wc, grep. Их описание смотрите в разделе архитектуры.

Кроме того, поддерживаются одинарные и двойные кавычки, оператор $, вызов внешней программы через Process для любой команды, которую интерпретатор не знает. Поддерживаются пайплайны, то есть перенаправление ввода и вывода.


## Архитектура

### AST

* **AstNode** &ndash; абстрактная вершина синтаксического дерева

* **TextNode** &ndash; текстовая вершина

* **CommandNode** &ndash; вершина-обертка над командой, введенной пользователем

### Command Line

* **ExecutionResult** &ndash; класс данных, хранящий результат выполнения команды

* **Scope** &ndash; окружение, запоминает переменные и их значения

* **CLExecutor** &ndash; запускает работу интерпретатора. Считывает введенные пользователем строки, обрабатывает их и сохраняет в виде **ExecutionResult**

* **CLParser** &ndash; интерфейс, принимающий строки от CLExecutor, обрабатывающий их и сохраняющий в виде синтаксического дерева (возвращает головную вершину этого дерева)

* **StandartParser** &ndash; реализация **CLParser**. Разбивает строки на слова, эти слова делит на группы пайплайнами. Затем преобразовывает полученные списки слов (читай комманд и текстовых значений) в синтаксическое дерево.

### Commands

* **Command** &ndash; абстрактный класс команды

* **CommandFactory** &ndash; преобразовыватель набора слов-токенов в синтаксические деревья. При расширении возможностей интерпретатора следует добавить класс новой команды (наследник **Command**) и добавить в класс **CommandFactory** правило, по которому будет производиться парсинг команды.

Дальше идут уже реализованные команды нашего интерпретатора. Все они наследники класса **Command**.

* **Assignment** &ndash; запоминание переменной (x=9)

* **Cat** &ndash; вывести содержимое файла (cat tmp.txt)

* **Echo** &ndash; вывести аргументы (echo 123)

* **Exit** &ndash; закончить работу интерпретатора

* **Pwd** &ndash; распечатать текущую директорию

* **Wc** &ndash; подсчитать число строк, слов и байт в файле

* **Grep** &ndash; поиск подстрок в файле или входном потоке


## Архитектура в картинках

## Библиотека разбора аргументов

* **kotlin --argparser** &ndash; использованная библиотека. Хорошая документация, не заброшена 10 лет назад, имеет все необходимое для нашей задачи.

* **kopper** &ndash; еще одная существующая библиотека. Но она давно не обновлялась, не так часто используется, документация повреднее.
